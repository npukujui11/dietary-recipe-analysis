nutrient_content_per_100g = struct( ...
    'XiaomiPorridge_Millet', struct('Carbohydrate', 73.5, 'Protein', 9.0, 'Fat', 1.6), ...
    'Youtiao_WheatFlour', struct('Carbohydrate', 70.0, 'Protein', 10.5, 'Fat', 1.8), ...
    'Youtiao_SoybeanOil', struct('Fat', 99.9, 'Carbohydrate', 0.0, 'Protein', 0.0), ...
    'FriedEgg_Egg', struct('Carbohydrate', 2.5, 'Protein', 13.1, 'Fat', 10.6), ...
    'FriedEgg_SoybeanOil', struct('Fat', 99.9, 'Carbohydrate', 0.0, 'Protein', 0.0), ...
    'SeaweedSalad_Seaweed', struct('Carbohydrate', 10.6, 'Protein', 1.2, 'Fat', 0.1), ...
    'SeaweedSalad_SesameOil', struct('Fat', 99.7, 'Carbohydrate', 0.0, 'Protein', 0.0), ...
    'Rice_Rice', struct('Carbohydrate', 77.2, 'Protein', 7.4, 'Fat', 0.6), ...
    'BlackFungusSalad_BlackFungus', struct('Carbohydrate', 6.0, 'Protein', 1.5, 'Fat', 0.2), ...
    'BlackFungusSalad_SesameOil', struct('Fat', 99.7, 'Carbohydrate', 0.0, 'Protein', 0.0), ...
    'DiSanXian_Eggplant', struct('Carbohydrate', 5.0, 'Protein', 1.0, 'Fat', 0.2), ...
    'DiSanXian_Potato', struct('Carbohydrate', 18.4, 'Protein', 2.0, 'Fat', 0.2), ...
    'DiSanXian_GreenPepper', struct('Carbohydrate', 5.4, 'Protein', 1.4, 'Fat', 0.3), ...
    'DiSanXian_SoybeanOil', struct('Fat', 99.9, 'Carbohydrate', 0.0, 'Protein', 0.0), ...
    'BraisedPorkBelly_PorkBelly', struct('Carbohydrate', 0.0, 'Protein', 20.6, 'Fat', 39.8), ...
    'BraisedPorkBelly_DriedTofu', struct('Carbohydrate', 10.0, 'Protein', 44.6, 'Fat', 18.0), ...
    'BraisedPorkBelly_SoybeanOil', struct('Fat', 99.9, 'Carbohydrate', 0.0, 'Protein', 0.0), ...
    'HotPotNoodles_CornFlour', struct('Carbohydrate', 74.0, 'Protein', 8.5, 'Fat', 1.5), ...
    'HotPotNoodles_Cabbage', struct('Carbohydrate', 3.6, 'Protein', 1.5, 'Fat', 0.2), ...
    'HotPotNoodles_BokChoy', struct('Carbohydrate', 3.8, 'Protein', 1.8, 'Fat', 0.4), ...
    'HotPotNoodles_DriedTofu', struct('Carbohydrate', 10.0, 'Protein', 44.6, 'Fat', 18.0), ...
    'HotPotNoodles_SoybeanOil', struct('Fat', 99.9, 'Carbohydrate', 0.0, 'Protein', 0.0), ...
    'Baozi_WheatFlour', struct('Carbohydrate', 70.0, 'Protein', 10.5, 'Fat', 1.8), ...
    'Baozi_Pork', struct('Carbohydrate', 0.0, 'Protein', 20.6, 'Fat', 39.8), ...
    'Baozi_Sauerkraut', struct('Carbohydrate', 5.0, 'Protein', 1.1, 'Fat', 0.2), ...
    'Baozi_SoybeanOil', struct('Fat', 99.9, 'Carbohydrate', 0.0, 'Protein', 0.0), ...
    'FriedChicken', struct('Carbohydrate', 0.0, 'Protein', 25.0, 'Fat', 20.0) ...
);

recipe = struct( ...
    'Breakfast', struct( ...
        'XiaomiPorridge_Millet', [15, 1], ...
        'Youtiao_WheatFlour', [50*2, 2], ...
        'Youtiao_SoybeanOil', [10*2, 2], ...
        'FriedEgg_Egg', [50, 1], ...
        'FriedEgg_SoybeanOil', [10, 1], ...
        'SeaweedSalad_Seaweed', [100, 1], ...
        'SeaweedSalad_SesameOil', [2, 1] ...
    ), ...
    'Lunch', struct( ...
        'Rice_Rice', [25*4, 4], ...
        'BlackFungusSalad_BlackFungus', [100, 1], ...
        'BlackFungusSalad_SesameOil', [2, 1], ...
        'DiSanXian_Eggplant', [80, 1], ...
        'DiSanXian_Potato', [80, 1], ...
        'DiSanXian_GreenPepper', [10, 1], ...
        'DiSanXian_SoybeanOil', [10, 1], ...
        'BraisedPorkBelly_PorkBelly', [50, 1], ...
        'BraisedPorkBelly_DriedTofu', [50, 1], ...
        'BraisedPorkBelly_SoybeanOil', [10, 1] ...
    ), ...
    'Dinner', struct( ...
        'HotPotNoodles_CornFlour', [80, 1], ...
        'HotPotNoodles_Cabbage', [20, 1], ...
        'HotPotNoodles_BokChoy', [20, 1], ...
        'HotPotNoodles_DriedTofu', [10, 1], ...
        'HotPotNoodles_SoybeanOil', [10, 1], ...
        'Baozi_WheatFlour', [25, 1], ...
        'Baozi_Pork', [15, 1], ...
        'Baozi_Sauerkraut', [20, 1], ...
        'Baozi_SoybeanOil', [5, 1], ...
        'FriedChicken', [100, 1] ...
    ) ...
);

total_energy = 0;
energy_from_protein = 0;
energy_from_fat = 0;
energy_from_carbs = 0;

energy_breakfast = 0;
energy_lunch = 0;
energy_dinner = 0;

meals = fieldnames(recipe);

for i = 1:numel(meals)
    meal = meals{i};
    foods = recipe.(meal);
    food_names = fieldnames(foods);
    meal_energy = 0;
    
    for j = 1:numel(food_names)
        food = food_names{j};
        amount = foods.(food){1};
        servings = foods.(food){2};
        total_amount = amount * servings;
        
        nutrients = fieldnames(nutrient_content_per_100g.(food));
        for k = 1:numel(nutrients)
            nutrient = nutrients{k};
            content_per_100g = nutrient_content_per_100g.(food).(nutrient);
            nutrient_total = (content_per_100g / 100) * total_amount;
            
            if strcmp(nutrient, '蛋白质')
                energy_from_protein = energy_from_protein + nutrient_total * 4;
            elseif strcmp(nutrient, '脂肪')
                energy_from_fat = energy_from_fat + nutrient_total * 9;
            elseif strcmp(nutrient, '碳水化合物')
                energy_from_carbs = energy_from_carbs + nutrient_total * 4;
            end
        end
        
        meal_energy = meal_energy + energy_from_protein + energy_from_fat + energy_from_carbs;
    end
    
    if strcmp(meal, '早餐')
        energy_breakfast = meal_energy;
    elseif strcmp(meal, '午餐')
        energy_lunch = meal_energy;
    elseif strcmp(meal, '晚餐')
        energy_dinner = meal_energy;
    end
    
    total_energy = total_energy + meal_energy;
end

% Output the results
fprintf('总能量摄入: %.2f 千卡\n', total_energy);
fprintf('蛋白质提供的能量: %.2f 千卡\n', energy_from_protein);
fprintf('脂肪提供的能量: %.2f 千卡\n', energy_from_fat);
fprintf('碳水化合物提供的能量: %.2f 千卡\n', energy_from_carbs);
fprintf('早餐提供的能量: %.2f 千卡\n', energy_breakfast);
fprintf('午餐提供的能量: %.2f 千卡\n', energy_lunch);
fprintf('晚餐提供的能量: %.2f 千卡\n', energy_dinner);
